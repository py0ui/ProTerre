<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Proterre - Excavation minière</title>
  <style>
    :root{
      --violet: #2B0954;
      --jaune: #F6B930;
      --violet-clair: #3E0B75;
      --jaune-pale: #FFF6D0;
      --violet-pale: #EEE6FA;
      --nav-height: 64px;
      --shadow: 0 10px 25px rgba(43,9,84,.15);
    }

    /* Reset / Base */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
      color:var(--violet);
      background: #fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }

    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    /* NAV */
    nav{
      position:fixed;
      top:0;left:0;right:0;
      height:var(--nav-height);
      background:var(--violet);
      color:var(--jaune);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 1rem;
      z-index:1200;
      gap:1rem;
    }
    .nav-left{display:flex;align-items:center;gap:0.75rem;}
    .nav-logo{height:44px; width:auto}
    .nav-title{font-weight:700;color:var(--jaune);font-size:1rem;text-align:center}

    .nav-links{
      display:flex;gap:1rem;align-items:center;
    }
    .nav-links a{
      color:var(--jaune);
      font-weight:700;
      padding:0.35rem 0.5rem;
      border-radius:6px;
      transition:opacity .18s, background .18s;
      text-align:center;
    }
    .nav-links a:hover{opacity:.85}

    /* Burger */
    .burger{
      display:none;
      width:36px;height:36px;
      border-radius:8px;
      align-items:center;justify-content:center;
      cursor:pointer;
      border:2px solid rgba(255,255,255,.35);
      background:transparent;
    }
    .burger-inner{
      width:22px;
      display:flex;flex-direction:column;gap:4px;
    }
    .burger-inner span{
      height:3px;background:var(--jaune);border-radius:3px;display:block;
      transition:transform .2s, opacity .2s;
    }

    /* HEADER */
    header{
      margin-top:var(--nav-height);
      min-height:72vh;
      height:calc(100vh - var(--nav-height));
      background-image:url('https://hexagon.com/-/media/project/one-web/master-site/altudo/l1140-specific-capability/wide-view-of-open-pit-mine.jpg?iar=0&hash=C285FAAF179E1E5629B81C87BA9663F5');
      background-size:cover;background-position:center;
      display:flex;align-items:center;justify-content:center;
      position:relative;
      text-align:center;
    }
    header::before{
      content:"";
      position:absolute;inset:0;background:linear-gradient(180deg, rgba(43,9,84,0.55), rgba(62,11,117,0.35));
      z-index:0;
    }
    .header-content{position:relative;z-index:1;color:var(--jaune);padding:1rem}
    .header-content h1{font-size:clamp(2rem,4vw,3rem);letter-spacing:1px;margin-bottom:.5rem;text-align:center}
    .header-content p{color:var(--jaune-pale);font-size:clamp(1rem,2.2vw,1.25rem);text-align:center}

    /* MAIN / Sections */
    main{overflow-x:hidden}
    section{
      padding:3.5rem 1rem;
      width:100%;
      text-align:center; /* centrer titres + contenu par défaut */
    }
    section:nth-of-type(even){background:var(--jaune-pale)}
    section:nth-of-type(odd){background:var(--violet-pale)}
    .wrap{max-width:1100px;margin:0 auto}

    section h2{
      display:inline-block;
      background:#fff;
      color:var(--violet);
      padding:.5rem 1rem;border-radius:8px;
      border:2px solid #fff;
      margin-bottom:1.5rem;
      font-size:1.25rem;
      box-shadow: var(--shadow);
      text-align:center;
    }

    /* TARIFS (avec stock au survol) */
    .tarif-container{
      display:flex;
      flex-wrap:wrap;
      gap:1rem;
      justify-content:center;
      align-items:start;
    }
    .tarif-item{
      position:relative;
      background:#fff;
      border:2px solid var(--violet);
      border-radius:14px;
      padding:1rem 1rem 1.25rem;
      text-align:center;
      flex:1 1 200px;
      max-width:240px;
      min-width:180px;
      transition: transform .18s, box-shadow .18s, border-color .18s;
      overflow:hidden;
      will-change:transform;
    }
    .tarif-item img{
      max-height:130px;
      object-fit:contain;
      margin:0 auto .5rem;
      border-radius:8px;
      transition: transform .18s;
    }
    .tarif-item h4{color:var(--violet);margin:.35rem 0 .15rem}
    .tarif-item p.price{color:var(--violet-clair);font-weight:800}
    .tarif-item .hover-overlay{
      position:absolute;inset:0;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:rgba(43,9,84,.88);
      color:#fff;
      opacity:0;pointer-events:none;
      transition:opacity .18s;
      padding:1rem;gap:.6rem;
      text-align:center;
    }
    .tarif-item .stock-line{font-weight:800}
    .tarif-item .voir-btn{
      background:var(--jaune);color:var(--violet);
      padding:.55rem 1rem;border-radius:10px;border:none;font-weight:800;cursor:pointer;
      box-shadow: var(--shadow);
    }
    .tarif-item:hover{transform:scale(1.06); box-shadow:var(--shadow); border-color:#432179;}
    .tarif-item:hover img{transform:scale(1.07)}
    .tarif-item:hover .hover-overlay{opacity:1;pointer-events:auto}

    .order-button{
      margin:1.25rem auto 0 auto;
      background:var(--jaune);color:var(--violet);
      padding:.85rem 1.35rem;border-radius:12px;border:none;font-weight:800;cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-block;
    }
    .order-button:hover{background:#ffd777}

    .livraison{
      display:flex;justify-content:center;margin-top:1.5rem;
    }
    .livraison .box{
      border:2px solid #000;background:#fff;padding:1rem;border-radius:12px;max-width:520px;text-align:center;
      box-shadow: var(--shadow);
      margin:0 auto;
    }
    .livraison img{max-width:50px;margin:0 auto}

    /* ANNONCES */
    .annonces-container{
      display:flex;flex-wrap:wrap;gap:1.25rem;justify-content:center;
    }
    .annonce{
      width:300px;background:#fff;border:2px solid var(--violet);border-radius:14px;overflow:hidden;position:relative;cursor:pointer;
      transition:transform .18s;
      box-shadow: var(--shadow);
      text-align:left;
    }
    .annonce:hover{transform:translateY(-4px)}
    .annonce img{width:100%;height:160px;object-fit:cover}
    .annonce-content{padding:1rem}
    .annonce-content h4{color:var(--violet);margin-bottom:.4rem}
    .annonce-content p{color:var(--violet-clair);font-size:.95rem;min-height:56px}
    .annonce .btn{position:absolute;bottom:1rem;right:1rem;background:var(--violet);color:var(--jaune);padding:.4rem .8rem;border-radius:8px;border:none;opacity:0;transition:opacity .18s}
    .annonce:hover .btn{opacity:1}

    /* MODALE FICHE MINERAI */
    .modal-backdrop{
      position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:1400;
      padding:1rem;
    }
    .modal{
      width:100%;max-width:860px;background:#fff;border-radius:16px;overflow:hidden;border:2px solid var(--violet);box-shadow: var(--shadow);
      display:grid;grid-template-columns: 1.1fr 1fr;gap:0;
      text-align:left;
      position:relative;
    }
    .modal-img{
      background:#faf7ff;display:flex;align-items:center;justify-content:center;padding:1rem;border-right:2px solid var(--violet);
    }
    .modal-img img{max-height:340px;object-fit:contain;border-radius:10px}
    .modal-body{padding:1.25rem}
    .modal-body h3{margin-bottom:.35rem;text-align:left}
    .modal-body .meta{color:var(--violet-clair);margin-bottom:.75rem;font-weight:700}
    .modal-body .reserve{
      background:var(--violet-pale);border-left:4px solid var(--violet);padding:.75rem;border-radius:10px;margin:.75rem 0;
    }
    .modal-actions{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:1rem}
    .close-x{
      position:absolute;top:10px;right:12px;background:#fff;border:2px solid var(--violet);border-radius:10px;padding:.25rem .55rem;cursor:pointer;font-weight:900;color:var(--violet);
      box-shadow: var(--shadow);
    }

    /* POP-UP PUB PARTENAIRES (plus imposant) */
    .popup{
      position:fixed;bottom:24px;right:24px;z-index:1500;display:none;
      background:#fff;border:2px solid var(--violet);border-radius:18px;box-shadow: 0 18px 50px rgba(43,9,84,.28);
      width:min(460px, 94vw); overflow:hidden;
      animation: popIn .28s ease-out;
    }
    @keyframes popIn{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
    @keyframes nudge{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
    .popup header{
      margin:0;height:auto;background:linear-gradient(90deg,var(--violet),var(--violet-clair));
      color:#fff;display:flex;align-items:center;gap:.5rem;justify-content:space-between;padding:.75rem .9rem;
    }
    .popup header h5{font-size:1.05rem}
    .popup .popup-close{
      background:rgba(255,255,255,.95);color:var(--violet);border:none;border-radius:10px;padding:.25rem .55rem;cursor:pointer;font-weight:900;font-size:1rem;
    }
    .popup .popup-body{display:flex;gap:.9rem;align-items:center;padding:1rem}
    .popup .popup-body img{width:96px;height:96px;object-fit:contain;border-radius:14px;border:2px solid var(--violet-pale);background:#fff}
    .popup .popup-body p{font-size:1rem;color:var(--violet-clair)}
    .popup .popup-actions{padding:0 1rem 1rem 1rem}
    .popup .cta-link{
      display:inline-block;
      background:var(--jaune);color:var(--violet);font-weight:900;text-align:center;
      padding:.75rem 1rem;border-radius:12px;box-shadow: var(--shadow);
    }
    .popup.attention{animation: nudge 0.9s ease-in-out 2 0.6s;}

    /* ---- Plume d'entrée (plus insistante) ---- */
    .plume{
      position:fixed;
      top:8%;
      left:6%;
      width:80px;
      opacity:.0;
      transform:translateY(-20px) scale(.95);
      animation: plumeIn 1.2s ease-out forwards .35s, plumeFloat 5s ease-in-out infinite 1.7s;
      z-index:1100;
      pointer-events:none;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,.25));
    }
    @keyframes plumeIn{
      to{opacity:1; transform:translateY(0) scale(1)}
    }
    @keyframes plumeFloat{
      0%,100%{ transform: translateY(0) }
      50%{ transform: translateY(-8px) }
    }

    /* Utilities */
    .center{display:flex;justify-content:center;align-items:center}

    /* ---------------- Responsive ---------------- */
    @media (max-width:1024px){
      .annonce img{height:150px}
      .modal{grid-template-columns:1fr}
      .modal-img{border-right:none;border-bottom:2px solid var(--violet)}
    }

    @media (max-width:768px){
      :root{--nav-height:56px}
      nav{height:var(--nav-height);padding:0 .75rem}
      header{height:calc(70vh - var(--nav-height));min-height:340px;margin-top:var(--nav-height)}
      .burger{display:flex;z-index:1301}
      /* mobile: menu masqué par défaut, visible quand .open */
      .nav-links{
        position:fixed;top:var(--nav-height);left:0;right:0;background:var(--violet);
        flex-direction:column;padding:1rem;gap:.5rem;display:none;z-index:1300
      }
      .nav-links a{padding:.6rem .75rem;border-radius:6px}
      .nav-links.open{display:flex}
      .tarif-container,.annonces-container{flex-direction:column;align-items:center}
      .tarif-item,.annonce{width:92%;max-width:520px}
    }

    @media (max-width:420px){
      .header-content h1{font-size:1.6rem}
      .header-content p{font-size:1rem}
      .annonce{width:100%}
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <nav role="navigation" aria-label="Navigation principale">
    <div class="nav-left">
      <img src="https://i.ibb.co/Dfz31v1r/Chat-GPT-Image-1-aout-2025-18-00-26-1.png" alt="Logo Proterre" class="nav-logo">
      <div class="nav-title">Proterre</div>
    </div>

    <div class="nav-links" id="nav-links" aria-label="Menu">
      <a href="#accueil">Accueil</a>
      <a href="#tarifs">Tarifs</a>
      <a href="#annonces">Annonces</a>
      <a href="#recrutement">Recrutement</a>
    </div>

    <button class="burger" id="burger" aria-label="Ouvrir le menu" aria-expanded="false" aria-controls="nav-links">
      <span class="burger-inner" aria-hidden="true">
        <span></span><span></span><span></span>
      </span>
    </button>
  </nav>

  <!-- HEADER -->
  <header id="accueil">
    <!-- Plume d’entrée insistante -->
    <img class="plume" src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/Feather.svg/240px-Feather.svg.png" alt="Plume décorative">
    <div class="header-content">
      <h1>Proterre</h1>
      <p>Excavation locale • Minage à l’ancienne • Magnétite, cuivre, pierre</p>
      <!-- Bouton 'Commander' supprimé ici comme demandé -->
    </div>
  </header>

  <main>
    <!-- TARIFS (avec stock au survol + fiche) -->
    <section id="tarifs">
      <div class="wrap center" style="flex-direction:column;">
        <h2>Nos minerais & tarifs</h2>
        <div style="height:1rem;"></div>

        <div class="tarif-container" role="list" id="minerals-grid">
          <!-- Chaque item porte ses données en data-* -->
          <div class="tarif-item" role="listitem" tabindex="0"
               data-name="Magnétite"
               data-price="12"
               data-stock="5140"
               data-img="https://i.ibb.co/mjQvwCF/Capture-decran-2025-08-02-021605.png">
            <img src="https://i.ibb.co/mjQvwCF/Capture-decran-2025-08-02-021605.png" alt="Magnétite">
            <h4>Magnétite</h4>
            <p class="price">12€</p>

            <div class="hover-overlay" aria-hidden="true">
              <div class="stock-line">Stock : 5140</div>
              <button class="voir-btn" type="button">Voir</button>
            </div>
          </div>

          <div class="tarif-item" role="listitem" tabindex="0"
               data-name="Cuivre"
               data-price="24"
               data-stock="797"
               data-img="https://i.ibb.co/Z6vS1VYF/Capture-decran-2025-08-02-021312-Pica-1.png">
            <img src="https://i.ibb.co/Z6vS1VYF/Capture-decran-2025-08-02-021312-Pica-1.png" alt="Cuivre">
            <h4>Cuivre</h4>
            <p class="price">24€</p>

            <div class="hover-overlay" aria-hidden="true">
              <div class="stock-line">Stock : 797</div>
              <button class="voir-btn" type="button">Voir</button>
            </div>
          </div>

          <div class="tarif-item" role="listitem" tabindex="0"
               data-name="Pierre"
               data-price="24"
               data-stock="5107"
               data-img="https://i.ibb.co/Nn2m5nWx/Capture-decran-2025-08-02-021319-1.png">
            <img src="https://i.ibb.co/Nn2m5nWx/Capture-decran-2025-08-02-021319-1.png" alt="Pierre">
            <h4>Pierre</h4>
            <p class="price">24€</p>

            <div class="hover-overlay" aria-hidden="true">
              <div class="stock-line">Stock : 5107</div>
              <button class="voir-btn" type="button">Voir</button>
            </div>
          </div>

          <div class="tarif-item" role="listitem" tabindex="0"
               data-name="Or"
               data-price="6"
               data-stock="0"
               data-img="https://i.ibb.co/d4QKdd83/Capture-decran-2025-08-03-030813-1.png">
            <img src="https://i.ibb.co/d4QKdd83/Capture-decran-2025-08-03-030813-1.png" alt="Or">
            <h4>Or</h4>
            <p class="price">6€</p>

            <div class="hover-overlay" aria-hidden="true">
              <div class="stock-line">Stock : 0</div>
              <button class="voir-btn" type="button">Voir</button>
            </div>
          </div>

          <div class="tarif-item" role="listitem" tabindex="0"
               data-name="Diamant"
               data-price="150"
               data-stock="700"
               data-img="https://i.ibb.co/wZdrtmbh/Capture-decran-2025-08-03-030419-1.png">
            <img src="https://i.ibb.co/wZdrtmbh/Capture-decran-2025-08-03-030419-1.png" alt="Diamant">
            <h4>Diamant</h4>
            <p class="price">150€</p>

            <div class="hover-overlay" aria-hidden="true">
              <div class="stock-line">Stock : 700</div>
              <button class="voir-btn" type="button">Voir</button>
            </div>
          </div>
        </div>

        <div class="livraison" aria-live="polite">
          <div class="box">
            <img src="https://cdn-icons-png.flaticon.com/512/4554/4554842.png" alt="Livraison">
            <h4 style="margin-top:.5rem;margin-bottom:.25rem">Livraison</h4>
            <p style="margin:0">Tarif selon la distance : entre 500€ et 1000€</p>
          </div>
        </div>

        <div style="margin-top:2rem">
          <button class="order-button" onclick="window.location.href='https://discord.com/channels/1392204625641340939/1400683350246686770'">Commander</button>
        </div>
      </div>
    </section>

    <!-- ANNONCES -->
    <section id="annonces">
      <div class="wrap center" style="flex-direction:column;">
        <h2>Nos dernières annonces</h2>
        <div style="height:1rem;"></div>

        <div class="annonces-container" aria-live="polite">
          <div class="annonce" onclick="window.location.href='https://discord.com/channels/1392204625641340939/1400680302308757554/1400872556956745881'">
            <img src="https://www.usinenouvelle.com/mediatheque/5/9/6/000759695_image_896x598/recrutement.jpg" alt="Annonce recrutement">
            <div class="annonce-content">
              <h4>Recrutement chez Proterre</h4>
              <p>Nous renforçons l’équipe de direction et recrutons des mineurs. Missions locales, ambiance familiale, matériel fourni.</p>
              <button class="btn">Voir</button>
            </div>
          </div>

          <div class="annonce" onclick="window.location.href='https://discord.com/channels/1392204625641340939/1400680245283131474/1400873022973280257'">
            <img src="https://gowork.fr/blog/wp-content/uploads/sites/8/2022/09/placement_interim_saint_malo_0.jpeg" alt="Annonce intérim">
            <div class="annonce-content">
              <h4>💼 Devenez intérimaire chez Proterre</h4>
              <p>Inscrivez-vous en intérim, participez à nos tours de mine et nous rachetons tous vos minerais. Infos sur notre radio D.</p>
              <button class="btn">Voir</button>
            </div>
          </div>

          <div class="annonce" onclick="window.location.href='https://discord.com/channels/1392204625641340939/1400681239253618911'">
            <img src="https://yago-talents-entrepreneurs.com/wp-content/uploads/2019/04/Partenaires.png" alt="Annonce partenariat">
            <div class="annonce-content">
              <h4>Devenir partenaire</h4>
              <p>Après une première commande, passez partenaire et obtenez la priorité sur nos disponibilités. Contact via le bouton ci-dessous.</p>
              <button class="btn">Voir</button>
            </div>
          </div>
        </div>

        <div style="margin-top:2rem">
          <button class="order-button" onclick="window.location.href='https://discord.com/channels/1392204625641340939/1400680245283131474'">Voir toutes les annonces</button>
        </div>
      </div>
    </section>

    <!-- RECRUTEMENT -->
    <section id="recrutement">
      <div class="wrap center" style="flex-direction:column;">
        <h2>Nous recrutons</h2>
        <div style="height:1rem;"></div>
        <p class="text-center" style="padding:0 1rem;">
          Nous recherchons des personnes motivées, sérieuses et respectueuses de la nature pour rejoindre notre équipe.
          Le travail est local, propre et réalisé à l’ancienne. Rejoignez une entreprise fiable et proche de ses employés.
        </p>

        <div style="margin-top:1.5rem">
          <button class="order-button" onclick="window.location.href='https://discord.com/channels/1392204625641340939/1400683350246686770'">Postuler</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p style="text-align:center;">&copy; 2025 Proterre - Tous droits réservés</p>
  </footer>

  <!-- MODALE FICHE MINERAI -->
  <div class="modal-backdrop" id="fiche-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <button class="close-x" id="fiche-close" aria-label="Fermer la fiche">✕</button>
      <div class="modal-img">
        <img id="fiche-img" src="" alt="Photo du minerai sélectionné">
      </div>
      <div class="modal-body">
        <h3 id="fiche-title">Minerai</h3>
        <div class="meta" id="fiche-meta">Prix : — • Stock : —</div>
        <div class="reserve">
          <strong>Réservation possible :</strong> vous pouvez commander dès maintenant, <em>nous réserverons le lot pour vous</em>.
        </div>
        <p>
          Extraction locale, traçabilité claire. Conditionnement à la demande selon vos besoins (vrac, big-bag, palette).
        </p>
        <div class="modal-actions">
          <button class="order-button" id="fiche-order">Commander</button>
          <button class="order-button" id="fiche-contact">Nous contacter</button>
        </div>
      </div>
    </div>
  </div>

  <!-- POP-UP PUB PARTENAIRES (plus imposant, image fournie) -->
  <div class="popup attention" id="partner-popup" aria-live="polite">
    <header>
      <h5>Annonce partenaire</h5>
      <button class="popup-close" id="popup-close" aria-label="Fermer la publicité">✕</button>
    </header>
    <div class="popup-body">
      <img src="https://i.ibb.co/Dfz31v1r/Chat-GPT-Image-1-aout-2025-18-00-26-1.png">
      <div>
        <p><strong>Place vacante</strong> — contactez-nous pour devenir partenaire.</p>
        <p style="margin-top:.35rem;">Visibilité sur le site + priorité commerciale.</p>
      </div>
    </div>
    <div class="popup-actions">
      <a class="cta-link" id="popup-action" href="https://discord.com/channels/1392204625641340939/1400683350246686770">Contactez-moi</a>
    </div>
  </div>

  <script>
    // ---------- Burger menu (mobile fiable) ----------
    (function(){
      const burger = document.getElementById('burger');
      const navLinks = document.getElementById('nav-links');

      function toggleMenu(){
        const isOpen = navLinks.classList.toggle('open');
        burger.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      }
      burger.addEventListener('click', toggleMenu);

      // Fermer au clic sur un lien
      navLinks.addEventListener('click', (e)=>{
        if(e.target.tagName === 'A' && navLinks.classList.contains('open')){
          navLinks.classList.remove('open');
          burger.setAttribute('aria-expanded','false');
        }
      });

      // Fermer si on resize vers desktop
      window.addEventListener('resize', ()=>{
        if(window.innerWidth > 768 && navLinks.classList.contains('open')){
          navLinks.classList.remove('open');
          burger.setAttribute('aria-expanded','false');
        }
      });
    })();

    // ---------- FICHE MINERAI (modale) ----------
    (function(){
      const grid = document.getElementById('minerals-grid');
      const backdrop = document.getElementById('fiche-backdrop');
      const closeBtn = document.getElementById('fiche-close');
      const img = document.getElementById('fiche-img');
      const title = document.getElementById('fiche-title');
      const meta = document.getElementById('fiche-meta');
      const orderBtn = document.getElementById('fiche-order');
      const contactBtn = document.getElementById('fiche-contact');

      const ORDER_LINK = 'https://discord.com/channels/1392204625641340939/1400683350246686770';

      function openFiche(data){
        img.src = data.img;
        img.alt = data.name;
        title.textContent = data.name;
        meta.textContent = `Prix : ${data.price}€ • Stock : ${data.stock}`;
        orderBtn.onclick = ()=> window.location.href = ORDER_LINK;
        contactBtn.onclick = ()=> window.location.href = ORDER_LINK;
        backdrop.style.display = 'flex';
        backdrop.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
      }

      function closeFiche(){
        backdrop.style.display = 'none';
        backdrop.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
      }

      grid.addEventListener('click', (e)=>{
        const item = e.target.closest('.tarif-item');
        const seeBtn = e.target.closest('.voir-btn');
        if(!item && !seeBtn) return;
        const card = seeBtn ? seeBtn.closest('.tarif-item') : item;
        const data = {
          name: card.dataset.name,
          price: card.dataset.price,
          stock: card.dataset.stock,
          img: card.dataset.img
        };
        openFiche(data);
      });

      // Accessibilité: ouvrir avec Entrée/Espace
      grid.addEventListener('keydown', (e)=>{
        if((e.key === 'Enter' || e.key === ' ') && e.target.classList.contains('tarif-item')){
          e.preventDefault();
          const card = e.target;
          const data = {
            name: card.dataset.name,
            price: card.dataset.price,
            stock: card.dataset.stock,
            img: card.dataset.img
          };
          openFiche(data);
        }
      });

      closeBtn.addEventListener('click', closeFiche);
      backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeFiche(); });
      window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeFiche(); });
    })();

    // ---------- POP-UPS PARTENAIRES (imposants + 1 dans les 10 premières secondes) ----------
    (function(){
      const popup = document.getElementById('partner-popup');
      const close = document.getElementById('popup-close');

      let showing = false;

      function showPopup(){
        if(showing) return;
        showing = true;
        popup.style.display = 'block';
        popup.classList.add('attention');
        // auto-fermeture après 15s si l'utilisateur ne ferme pas
        setTimeout(()=>{ if(showing) hidePopup(); }, 15000);
      }
      function hidePopup(){
        popup.style.display = 'none';
        showing = false;
        popup.classList.remove('attention');
      }

      close.addEventListener('click', hidePopup);

      // 1) Un popup dans les 10 premières secondes (ici à 1s pour être sûr)
      setTimeout(showPopup, 1000);

      // 2) Puis réapparition régulière (toutes les ~22s)
      setInterval(()=>{
        if(!showing) showPopup();
      }, 22000);

      // 3) Après fermeture manuelle, réapparition un peu plus tôt (8s) pour insister
      close.addEventListener('click', ()=>{
        setTimeout(()=>{ if(!showing) showPopup(); }, 8000);
      });
    })();
  </script>
</body>
</html>